importScripts('es6-promise.js');
new ES6Promise.Promise(function(resolve, reject) {
  self.onMessage = function (e) {
    if (e.data === 'ping') {
      resolve('pong');
    } else {
      reject(new Error('wrong Message'));
    }
  };
}).then(function (result) {
  self.postMessage(result);
}, function (err){
  setTimeout(function () {
    throw err;
  });
});
